@startuml
'https://plantuml.com/class-diagram

autonumber
    actor "Administrator" as ADM

    participant ":AddSNSfromCSVUI" as UI
    participant ":AddSNSfromCSVController" as  CTRL
    participant "Company" as COMP
    participant "dtoSNSuser" as DTO
    participant "app:App" as APP
    participant "auth:AuthFacade" as AUTH
    participant "em:SNSuser" as SNS
    participant "validate:Validate" as VALID
    participant "SNSuserList \n:List<SNSuser>"

        activate ADM
       activate CTRL
       CTRL->APP: app=getInstance()
       activate APP
       APP->COMP: company=getCompany();
       activate COMP
       deactivate COMP
       deactivate APP
       deactivate CTRL
       ADM -> UI: Request register new Users from CSV file
       activate UI
       UI --> ADM: request data(file name or address of file)
       deactivate UI
       UI <- ADM: Types requested data

       activate UI

       group loop: [while CSV file has a line with information]
       UI->UI:validateContents(Line)
       activate UI
       deactivate UI
       UI->CTRL: createSNSuser(dto)
       activate CTRL
       CTRL->COMP: us=createSNSuser(dto)
       activate COMP
       ref over COMP
         SD_DTO_SNS_USER
         "Company" gets all SNS user attributes
       end reF
       CTRL-->UI: printSNSuser()
       deactivate COMP
       deactivate CTRL
       ADM <-- UI: shows the user data and requests confirmation
       deactivate UI

       ADM -> UI: confirms the data
       activate UI
       UI->CTRL:saveSNSuser(dto)
       activate CTRL
       CTRL->COMP:saveSNSuser(dto)
       activate COMP
       COMP->AUTH:addUserWithRole(name, email, pwd, roleId)
       activate AUTH
       deactivate AUTH
       COMP->COMP:validateSNSuserDTO(dtoSNSuser dto,int i)
       deactivate CTRL


       ADM <-- UI: informs operation success
       deactivate UI
       end
       @enduml

@enduml