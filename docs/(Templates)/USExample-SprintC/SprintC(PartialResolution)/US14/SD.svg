<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1051px" preserveAspectRatio="none" style="width:2549px;height:1051px;" version="1.1" viewBox="0 0 2549 1051" width="2549px" zoomAndPan="magnify"><defs><filter height="300%" id="frbo14czrf3bp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="850.6309" style="stroke:#A80036;stroke-width:1.0;" width="10" x="60" y="98.4883"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="297.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="119.7988"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="192.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="446.5938"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="133.4199" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="668.457"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="117.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="831.1875"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="238.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="149.1094"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="118.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="475.9043"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="58.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="697.7676"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="59.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="860.498"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1047" y="239.3516"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1199" y="298.6621"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1199" y="505.2148"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1473" y="727.0781"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1473" y="889.8086"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2008" y="357.9727"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2008" y="564.5254"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="462.5" x2="462.5" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="867.5" x2="867.5" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1051.5" x2="1051.5" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1204" x2="1204" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1354" x2="1354" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1478" x2="1478" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1814" x2="1814" y1="767.8223" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2013" x2="2013" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2203" x2="2203" y1="88.4883" y2="967.1191"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2424" x2="2424" y1="88.4883" y2="967.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="5" y="85.5352">Specialist Doctor</text><ellipse cx="65" cy="15" fill="#FEFECE" filter="url(#frbo14czrf3bp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M65,23 L65,50 M52,31 L78,31 M65,50 L52,65 M65,50 L78,65 " fill="none" filter="url(#frbo14czrf3bp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="5" y="979.6543">Specialist Doctor</text><ellipse cx="65" cy="992.6074" fill="#FEFECE" filter="url(#frbo14czrf3bp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M65,1000.6074 L65,1027.6074 M52,1008.6074 L78,1008.6074 M65,1027.6074 L52,1042.6074 M65,1027.6074 L78,1042.6074 " fill="none" filter="url(#frbo14czrf3bp)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="139" x="391.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="398.5" y="73.5352">: MakeDiagnosisUI</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="139" x="391.5" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="398.5" y="986.6543">: MakeDiagnosisUI</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="195" x="768.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="775.5" y="73.5352">: MakeDiagnosisController</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="195" x="768.5" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="775.5" y="986.6543">: MakeDiagnosisController</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="91" x="1004.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1015.5" y="73.5352">: Company</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="91" x="1004.5" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1015.5" y="986.6543">: Company</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="132" x="1136" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1143" y="73.5352">tStore : TestStore</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="132" x="1136" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1143" y="986.6543">tStore : TestStore</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="140" x="1282" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1289" y="73.5352">lTests : List&lt;Test&gt;</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="140" x="1282" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1289" y="986.6543">lTests : List&lt;Test&gt;</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1436" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1443" y="73.5352">test : Test</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1436" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1443" y="986.6543">test : Test</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="205" x="1710" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="1717" y="986.6543">diagnosis : DiagnosisReport</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="164" x="1929" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="1936" y="73.5352">tMapper : TestMapper</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="164" x="1929" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="1936" y="986.6543">tMapper : TestMapper</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="188" x="2107" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="2114" y="73.5352">lTestsDto : List&lt;TestDto&gt;</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="188" x="2107" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="2114" y="986.6543">lTestsDto : List&lt;TestDto&gt;</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="226" x="2309" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="2316" y="73.5352">testResultsDto : TestResultsDto</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="226" x="2309" y="966.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="2316" y="986.6543">testResultsDto : TestResultsDto</text><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="850.6309" style="stroke:#A80036;stroke-width:1.0;" width="10" x="60" y="98.4883"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="297.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="119.7988"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="192.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="446.5938"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="133.4199" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="668.457"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="117.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="458" y="831.1875"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="238.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="149.1094"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="118.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="475.9043"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="58.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="697.7676"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="59.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="863" y="860.498"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1047" y="239.3516"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1199" y="298.6621"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1199" y="505.2148"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1473" y="727.0781"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1473" y="889.8086"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2008" y="357.9727"/><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2008" y="564.5254"/><polygon fill="#A80036" points="446,115.7988,456,119.7988,446,123.7988,450,119.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="452" y1="119.7988" y2="119.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="77" y="115.0566">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="90" y="115.0566">requests starting a new diagnosis</text><polygon fill="#A80036" points="851,145.1094,861,149.1094,851,153.1094,855,149.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="468" x2="857" y1="149.1094" y2="149.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="475" y="144.3672">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="488" y="144.3672">lTestsDto = getTestsPendingDiagnosis()</text><rect fill="#FFFFFF" filter="url(#frbo14czrf3bp)" height="55.9316" style="stroke:#000000;stroke-width:2.0;" width="255" x="765.5" y="157.1094"/><polygon fill="#EEEEEE" points="765.5,157.1094,829.5,157.1094,829.5,164.1094,819.5,174.1094,765.5,174.1094,765.5,157.1094" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="778.5" y="171.6777">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="771.5" y="190.6777">SD_GET_EMPLOYEE_OF_CURRENT_USER</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="771.5" y="205.9883">(Controller gets an</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66" x="892.5" y="205.9883">employee</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="962.5" y="205.9883">object)</text><polygon fill="#A80036" points="1035,235.3516,1045,239.3516,1035,243.3516,1039,239.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="1041" y1="239.3516" y2="239.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="880" y="234.6094">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="893" y="234.6094">tStore = getTestStore()</text><polygon fill="#A80036" points="1187,294.6621,1197,298.6621,1187,302.6621,1191,298.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="1193" y1="298.6621" y2="298.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="880" y="293.9199">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="893" y="293.9199">lTests = getTestsWithPendingDiagnosis()</text><polygon fill="#A80036" points="1996,353.9727,2006,357.9727,1996,361.9727,2000,357.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="2002" y1="357.9727" y2="357.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="880" y="353.2305">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="893" y="353.2305">lTestsDto = toDto(lTests)</text><polygon fill="#A80036" points="81,413.2832,71,417.2832,81,421.2832,77,417.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75" x2="462" y1="417.2832" y2="417.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="87" y="412.541">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="100" y="412.541">shows tests pending a diagnosis and asks to select one</text><polygon fill="#A80036" points="446,442.5938,456,446.5938,446,450.5938,450,446.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="452" y1="446.5938" y2="446.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="77" y="441.8516">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="90" y="441.8516">select the intended test</text><polygon fill="#A80036" points="851,471.9043,861,475.9043,851,479.9043,855,475.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="468" x2="857" y1="475.9043" y2="475.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="475" y="471.1621">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="363" x="488" y="471.1621">testResultsDto = getTestWithPendingDiagnosis(testCode)</text><polygon fill="#A80036" points="1187,501.2148,1197,505.2148,1187,509.2148,1191,505.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="1193" y1="505.2148" y2="505.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="880" y="500.4727">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294" x="893" y="500.4727">test = getTestWithPendingDiagnosis(testCode)</text><polygon fill="#A80036" points="1996,560.5254,2006,564.5254,1996,568.5254,2000,564.5254" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="2002" y1="564.5254" y2="564.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="880" y="559.7832">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="902" y="559.7832">testResultsDto = toResultDto(test)</text><polygon fill="#A80036" points="81,635.1465,71,639.1465,81,643.1465,77,639.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75" x2="462" y1="639.1465" y2="639.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="87" y="626.749">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="109" y="619.0938">shows test results and reference values</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="113" y="634.4043">and ask to type the text diagnosis</text><polygon fill="#A80036" points="446,664.457,456,668.457,446,672.457,450,668.457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="452" y1="668.457" y2="668.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="77" y="663.7148">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="99" y="663.7148">types the text diagnosis</text><polygon fill="#A80036" points="851,693.7676,861,697.7676,851,701.7676,855,697.7676" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="468" x2="857" y1="697.7676" y2="697.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="475" y="693.0254">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="497" y="693.0254">createDiagnosis(text)</text><polygon fill="#A80036" points="1461,723.0781,1471,727.0781,1461,731.0781,1465,727.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="1467" y1="727.0781" y2="727.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="880" y="722.3359">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="902" y="722.3359">diagnosis = createDiagnosis(employee, now(), text)</text><polygon fill="#A80036" points="1698,752.3887,1708,756.3887,1698,760.3887,1702,756.3887" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1478" x2="1704" y1="756.3887" y2="756.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1485" y="751.6465">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="1507" y="751.6465">create(employee, now(), text)</text><rect fill="#FEFECE" filter="url(#frbo14czrf3bp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="205" x="1710" y="735.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="1717" y="755.6133">diagnosis : DiagnosisReport</text><polygon fill="#A80036" points="81,797.877,71,801.877,81,805.877,77,801.877" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75" x2="462" y1="801.877" y2="801.877"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="87" y="797.1348">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="109" y="797.1348">shows all data and asks for confirmation</text><polygon fill="#A80036" points="446,827.1875,456,831.1875,446,835.1875,450,831.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="452" y1="831.1875" y2="831.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="77" y="826.4453">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="99" y="826.4453">confirms</text><polygon fill="#A80036" points="851,856.498,861,860.498,851,864.498,855,860.498" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="468" x2="857" y1="860.498" y2="860.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="475" y="855.7559">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="497" y="855.7559">saveDiagnosis()</text><polygon fill="#A80036" points="1461,885.8086,1471,889.8086,1461,893.8086,1465,889.8086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="873" x2="1467" y1="889.8086" y2="889.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="880" y="885.0664">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="902" y="885.0664">addDiagnosis(diagnosis)</text><polygon fill="#A80036" points="76,945.1191,66,949.1191,76,953.1191,72,949.1191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="70" x2="462" y1="949.1191" y2="949.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="82" y="944.377">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="104" y="944.377">informs success</text><!--MD5=[c2a484f7304aac09f62702ca1af51e2c]
@startuml
autonumber

actor "Specialist Doctor" as USER
participant ": MakeDiagnosisUI" as UI
participant ": MakeDiagnosisController" as CTRL
participant " : Company" as COMP
participant "tStore : TestStore" as STORE
participant "lTests : List<Test>" as LIST_TEST
participant "test : Test" as TEST
participant "diagnosis : DiagnosisReport" as DIAG
participant "tMapper : TestMapper" as MAPPER
participant "lTestsDto : List<TestDto>" as LIST_TEST_DTO
participant "testResultsDto : TestResultsDto" as TEST_RESULT_DTO


activate USER

USER -> UI: requests starting a new diagnosis
activate UI
UI -> CTRL: lTestsDto = getTestsPendingDiagnosis()
activate CTRL
ref over CTRL
  SD_GET_EMPLOYEE_OF_CURRENT_USER
  (Controller gets an **employee** object)
end ref
CTRL -> COMP: tStore = getTestStore()
activate COMP
deactivate COMP

CTRL -> STORE: lTests = getTestsWithPendingDiagnosis()
activate STORE
deactivate STORE

CTRL -> MAPPER : lTestsDto = toDto(lTests)
activate MAPPER
deactivate MAPPER

deactivate CTRL

UI - -> USER: shows tests pending a diagnosis and asks to select one
deactivate UI

USER -> UI: select the intended test
activate UI
UI -> CTRL: testResultsDto = getTestWithPendingDiagnosis(testCode)
activate CTRL

CTRL -> STORE : test = getTestWithPendingDiagnosis(testCode)
activate STORE
deactivate STORE

CTRL -> MAPPER: testResultsDto = toResultDto(test)
activate MAPPER
deactivate MAPPER

deactivate CTRL
UI - -> USER : shows test results and reference values \n and ask to type the text diagnosis
deactivate UI

USER -> UI: types the text diagnosis
activate UI

UI->CTRL: createDiagnosis(text)
activate CTRL
CTRL -> TEST : diagnosis = createDiagnosis(employee, now(), text)
activate TEST

TEST -> DIAG**: create(employee, now(), text)

deactivate TEST
deactivate CTRL
UI - -> USER: shows all data and asks for confirmation
deactivate UI

USER -> UI: confirms
activate UI
UI -> CTRL: saveDiagnosis()
activate CTRL
CTRL -> TEST: addDiagnosis(diagnosis)
activate TEST
deactivate TEST
deactivate CTRL

UI - -> USER : informs success
deactivate UI

deactivate USER
@enduml

PlantUML version 1.2021.5(Sun Apr 25 12:20:28 WEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: PT
--></g></svg>